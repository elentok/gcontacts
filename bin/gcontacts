#!/usr/bin/env coffee

GoogleContacts = require '../lib/google_contacts'

nomnom = require 'nomnom'
nomnom.script('gcontacts')
nomnom.options
  email:
    position: 0
    required: true
  password:
    position: 1
    required: true

options = nomnom.parse()

if options.email?
  contacts = new GoogleContacts(options)
  console.log "Connecting..."
  contacts.connect (err) ->
    if err?
      console.log "ERROR: #{err}"
    else
      console.log "Getting contacts..."
      contacts.getContacts (err, page) ->
        if err?
          console.log "ERROR: #{err}"
        else
          console.log "Success"
          console.log page.startIndex
          console.log page.itemsPerPage
          console.log page.totalResults
          for contact in page.contacts
            console.log contact


